name: 🤖 SFTP Deploy 🚀
on: [push]
jobs:
  discord_message_job:
    runs-on: ubuntu-latest
    name: discord message
    steps:
      - uses: actions/checkout@v2
      - name: Set modified files variable
        run: |
          echo "::set-output name=modified_files::$GITHUB_COMMIT_MODIFIED"
      - name: Print modified files
        run: |
          echo "Modified files: ${{ steps.set_modified_files.outputs.modified_files }}"
    
    
    
      - name: Discord message
        uses: rjstone/discord-webhook-notify@v1
        with:
          severity: info
          username: ${{ github.actor }} 
          color: '#25A2FE'
          avatarUrl: https://github.githubassets.com/images/modules/logos_page/Octocat.png
          description: ${{ github.actor }} has commited ${{ github.event.head_commit.message }}.
          details: '${{ github.event.commit.modified }}'
          footer: This is a footer.
          text: New commit (${{ github.event.head_commit.message }})
          webhookUrl: ${{ secrets.DISCORD_WEBHOOK }}
          
          
          
  deploy_job:
     runs-on: ubuntu-latest
     name:  deploy
     steps:
       - name: 🔍️ Checkout 📝
         uses: actions/checkout@v2
                    
       - name: 🌐 Deploy file 📦️
         uses: wlixcc/SFTP-Deploy-Action@v1.2.4
         with: 
           username: ${{ secrets.FTP_USER }}
           server: ${{ secrets.FTP_SERVER }} 
           port: ${{ secrets.FTP_PORT }}
           local_path: './*'
           remote_path: '/plugins/Skript/scripts/'
           sftp_only: true
           password: ${{ secrets.FTP_PASSWORD }}
